var myHeaders=new Headers;myHeaders.append("Content-Type","application/json");var channelName,articleArray=[];function processRSS(e){var r=e.querySelectorAll("item");channelName=e.querySelector("channel > title").innerHTML,console.log("nazov channelu - ",channelName),console.log("Items - ",r),r.forEach(e=>{var r;r=e.querySelector("enclosure")?e.querySelector("enclosure").getAttribute("url"):e.querySelector("image")?e.querySelector("image").querySelector("url").innerHTML:"",articleArray.push({title:e.querySelector("title").innerHTML,description:e.querySelector("description").innerHTML,pubDate:new Date(e.querySelector("pubDate").innerHTML),link:e.querySelector("link").innerHTML,image:r})}),renderArticles(),console.log(articleArray)}function renderArticles(){document.getElementById("articles").innerHTML="";var e="";$("#channel").text(channelName),articleArray.forEach(r=>{e+=`       \n        <div class="card mb-4">\n          <img class="card-img-top" src="${r.image}" alt="">\n        <div class="card-body">\n          <h2 class="card-title"> ${r.title}</h2>\n          <p class="card-text">  ${r.description}</p>\n          <a href="${r.link}" class="btn btn-primary">Read More &rarr;</a>\n        </div>\n        <div class="card-footer text-muted">\n        ${r.pubDate}\n        </div>\n      </div>`}),document.getElementById("articles").insertAdjacentHTML("beforeend",e)}$("#sort-select").change(function(){var e=document.getElementById("sort-select");"PubDate - Ascending"==e.options[e.selectedIndex].text?(console.log("sortujem asc"),articleArray=articleArray.sort((e,r)=>e.pubDate-r.pubDate)):(console.log("sortujem desc"),articleArray=articleArray.sort((e,r)=>r.pubDate-e.pubDate)),console.log(articleArray),renderArticles()}),$("#getURL").click(function(){articleArray=[];var e=$("#url").val();raw=JSON.stringify({url:e}),fetch("https://cors-anywhere.herokuapp.com/"+e).then(e=>e.text()).then(e=>(new window.DOMParser).parseFromString(e,"text/xml")).then(e=>{processRSS(e)}).catch(e=>console.log("error",e))});